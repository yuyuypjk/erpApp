<template>
    <text 
        class="cmui-picker"
        :class="[
            !value ? 'cmui-placeholder' : ''
        ]"
        @click="select">{{placeholder}}</text>
</template>

<script>
    let picker = weex.requireModule('picker');
    
    module.exports = {
        name: 'CmuiPicker',

        componentName: 'CmuiPicker',

        props: {
            type: {
                type: String,
                default: 'date'
            },
            placeholder: {
                type: String,
                default: '请选择'
            },
            value: String
        },

        computed: {
            pickerFunc () {
                // 默认选择日期
                let funcName = 'pickDate';

                if (this.type === 'time') {
                    funcName = 'pickTime';  // 选择时间
                }

                return funcName;
            }
        },

        methods: {
            select (e) {
                picker[this.pickerFunc]({
                    value: this.value
                }, event => {
                    if (event.result === 'success') {
                        this.value = event.data;
                        this.placeholder = event.data;

                        this.$emit('pick', event);
                    }
                });
            }
        }
    }
</script>

<style lang="sass" scoped>
    @import './picker.scss';
</style>
